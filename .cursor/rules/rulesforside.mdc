---
description: 
globs: 
alwaysApply: true
---
> âš¡ï¸ This project is created and maintained by a professional web developer with expertise in modern web technologies, UI/UX design, and scalable cloud-based systems. It follows best practices for structure, performance, mobile responsiveness, accessibility, SEO optimization, security, and maintainability. # ğŸ”§ Project Rules â€“ Bid Management with Firebase + GitHub Pages

## ğŸ§© Tech Stack

**Frontend:**
- React (using Vite or CRA)
- Tailwind CSS
- Firebase Web SDK
- Cursor AI (for development)

**Hosting:**
- GitHub Pages (for frontend deployment)

**Backend (serverless):**
- Firebase Authentication
- Firestore (NoSQL database)

---

## ğŸ“¦ Functionality

### 1. ğŸ” Authentication
- Firebase Authentication using email and password
- Every user is assigned a role: `admin` or `ue`
- Only logged-in users can access data

### 2. ğŸ“‹ Projects & Bids
- Admin maps each subcontractorâ€™s email address to an alias (e.g., A, B, C)
- When a UE logs in, their alias is automatically determined and displayed based on their email

- Admin can create projects and categories (e.g., Ventilation, Electrical)
- Subcontractors (UE) can only log in and view their own bids
- UE can see their own price ranking but not othersâ€™ aliases
- The joker is never revealed to UE (only shown as a potential top placement)
- Admin can mark jokers, change aliases, and add comments

### 3. ğŸ§  Joker Logic
- The joker is automatically placed between position 1â€“3 (or 1â€“2 if only one real bid exists)
- Alias is randomly assigned Aâ€“C and saved in Firestore
- Admin can manually adjust joker placement

### 4. ğŸ’¾ Database Structure (Firestore)

```jsonc
users (collection)
  â””â”€ userId (document)
      â”œâ”€ email: "someone@example.com"
      â”œâ”€ role: "ue" or "admin"
      â””â”€ alias: "A"


projects (collection)
  â””â”€ projectId (document)
      â”œâ”€ name: "Autogyron 3"
      â”œâ”€ deadline: "2026-04-15"
      â””â”€ categories (collection)
          â””â”€ categoryId (document)
              â”œâ”€ name: "Ventilation"
              â”œâ”€ deadline: "2026-04-12"
              â””â”€ bids (collection)
                  â””â”€ bidId (document)
                      â”œâ”€ alias: "A"
                      â”œâ”€ userId: "authId123"
                      â”œâ”€ price: 455000
                      â”œâ”€ completeness: "90%"
                      â”œâ”€ submitted: "2026-03-15"
                      â”œâ”€ comment: "Complete but missing installation timeline"
                      â””â”€ isJoker: true
```

### 5. ğŸ”’ Firestore Rules (pseudo-code)
```ts
match /projects/{projectId}/categories/{categoryId}/bids/{bidId} {
  allow read: if request.auth != null;

  // UE can only read their own bids
  allow read: if resource.data.userId == request.auth.uid;

  // Admin can read and write everything
  allow read, write: if get(/databases/(default)/documents/users/$(request.auth.uid)).data.role == "admin";
}
```

---

## ğŸ§± Code Structure Guidelines

To keep the project maintainable and scalable, follow this recommended structure:

```
/src
â”œâ”€â”€ components/          # Reusable UI components (e.g. BidTable, BidRow, LoginForm)
â”œâ”€â”€ pages/               # Route-level views (e.g. AdminView, UEView, ProjectPage)
â”œâ”€â”€ services/            # Firebase logic (auth, firestore queries)
â”œâ”€â”€ context/             # React context for user and auth state
â”œâ”€â”€ styles/              # Global and utility CSS or Tailwind config overrides
â”œâ”€â”€ firebase.js          # Firebase app initialization and config
â””â”€â”€ App.jsx              # App root with routes and layout
```

- Use functional components and React hooks
- Separate logic from UI (e.g., Firestore queries live in `services/`)
- Use environment variables for Firebase config in `.env`
- Keep authentication and user role handling in global context

---

## ğŸ§ª Features to Expand
- Automatic joker suggestion after first bid
- Visual sorting by price
- Duplicate alias detection
- Export bids to CSV (admin only)
- Optional email notifications

